import{b as o}from"./helpers-CJiaW3rk.js";function p(r){const e=o(r,!1,{iframe:"iframe"});e.playButton.addEventListener("click",i,{once:!0});function i(){e.iframe.addEventListener("load",c,{once:!0}),e.iframe.setAttribute("src",e.iframe.getAttribute("data-src")),e.videoPlayer.dataset.state="isLoading",e.playButton.style.display="none"}function c(){e.videoPlayer.dataset.state="isLoaded",e.posterImage.dataset.state="isHidden"}const a=window.GrandCookieIM.getConfig(),s=e.iframe.getAttribute("data-src"),t=Object.keys(a.services).find(n=>s.includes(n));return window.GrandCookieIM.getState().acceptedServices.includes(t)||(e.videoPlayer.dataset.state="isBlocked",e.acceptance.querySelector(".title").textContent=e.iframe.title,e.acceptance.querySelector(".notice").innerHTML=a.services[t].languages[a.currLang].notice,e.acceptance.querySelector(".button").textContent=a.services[t].languages[a.currLang].loadAllBtn),window.addEventListener("cc:onConsent",({detail:n})=>{window.GrandCookieIM.getState().acceptedServices.includes(t)&&(e.videoPlayer.dataset.state="")}),e.acceptance.querySelector(".button").addEventListener("click",()=>{window.GrandCookieIM.acceptService(t);const n=[...window.GrandCookie.getUserPreferences().acceptedServices.analytics,t];window.GrandCookie.acceptService(n,"analytics"),e.acceptance.style.display="none",i()}),()=>{e.playButton.removeEventListener("click",i),e.iframe.removeEventListener("load",c)}}export{p as default};
