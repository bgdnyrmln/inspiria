import{g as c,b as l}from"./helpers-CJiaW3rk.js";import{J as u}from"./just-validate.es-C73wyOde.js";function g(r){const o=c(r),t=d(l(r),o);return()=>{t.destroy()}}function d(r,o,t){const n=new u(r.form);return n.onSuccess(()=>{f(r,o)}),r.form.querySelectorAll("input, textarea").forEach(e=>{const s=[];e.hasAttribute("required")&&s.push({rule:"required",errorMessage:o.errors.required}),e.type==="email"&&s.push({rule:"email",errorMessage:o.errors.email}),s.length&&n.addField(e,s)}),r.form.querySelectorAll(".input-group").forEach(e=>{const s=e.querySelector('input[type="file"]'),a=e.querySelector(".upload-text");s.addEventListener("change",i=>{i.target.files.length>0?a.textContent=i.target.files[0].name:a.textContent=a.getAttribute("data-label")})}),null}async function f(r,o){const t=r.form,n=new FormData(t);n.append("nonce",o.nonce),n.append("action","contacts_form"),t.classList.add("loading");try{const e=await fetch(o.ajax_url,{method:"POST",body:n});if(!e.ok)throw new Error("Network response was not ok");const s=await e.text(),a=JSON.parse(s);t.classList.remove("loading"),a.status==="000"?a.redirect?window.location.href=a.redirect:(t.classList.add("success"),t.reset()):a.errors&&(t.classList.remove("success"),t.classList.add("error"))}catch(e){console.error("Request failed",e)}}export{g as default};
