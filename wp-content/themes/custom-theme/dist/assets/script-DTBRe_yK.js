import{g as c,b as l}from"./helpers-CJiaW3rk.js";import{J as u}from"./just-validate.es-C73wyOde.js";function m(n){const o=c(n),e=l(n),a=new u(e.form);return a.onSuccess(()=>{d(e,o)}),e.form.querySelectorAll("input, textarea").forEach(t=>{const r=[];t.hasAttribute("required")&&r.push({rule:"required",errorMessage:o.errors.required}),t.type==="email"&&r.push({rule:"email",errorMessage:o.errors.email}),r.length&&a.addField(t,r)}),e.form.querySelectorAll(".input-group").forEach(t=>{const r=t.querySelector('input[type="file"]'),s=t.querySelector(".upload-text");r.addEventListener("change",i=>{i.target.files.length>0?s.textContent=i.target.files[0].name:s.textContent=s.getAttribute("data-label")})}),()=>{}}async function d(n,o){const e=n.form,a=new FormData(e);a.append("nonce",o.nonce),a.append("action","contacts_form"),e.classList.add("loading");try{const t=await fetch(o.ajax_url,{method:"POST",body:a});if(!t.ok)throw new Error("Network response was not ok");const r=await t.text(),s=JSON.parse(r);e.classList.remove("loading"),s.status==="000"?s.redirect?window.location.href=s.redirect:(e.classList.add("success"),e.reset()):s.errors&&(e.classList.remove("success"),e.classList.add("error")),console.log(r)}catch(t){console.error("Request failed",t)}}export{m as default};
